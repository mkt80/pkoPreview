<section id="one" class="tiles">
	<article>
          <span class="image">
                  <img src="assets/images/don-posting.jpg" alt="PKO steerman posting" />
          </span>
          <header class="major">
                  <h3><a href="/members/registration/" class="link">2021 Member Registration</a></h3>
                  <p>Click here to begin the registration process for the 2021 paddling season.</p>
          </header>
  </article>
 
	<article>
          <span class="image">
                  <img src="assets/images/pecho-rock-race-facebook-event-v1.jpg" alt="Pecho Rock Race" />
          </span>
          <header class="major">
                  <h3><a href="/sponsorship/" class="link">Sponsorship</a></h3>
                  <p>As a non-profit organization, Pale Kai Outrigger Canoe Club relies on sponsorships and the tax-deductible donations of community friends, family, and supporters.

Donate Now.</p>
          </header>
  </article>

	{% for post in site.posts limit:site.tiles-count-news %}
		
			{% if site.tiles-source-news == 'posts'%}
		        <article>
		                <span class="image">
		                        <img src="{{ post.image }}" alt="" />
		                </span>
		                <header class="major">
		                        <h3><a href="{{ post.url  | relative_url }}" class="link">{{ post.title }}</a></h3>
		                        <p>{{ post.description }}</p>
		                </header>
		        </article>
			{% endif %}
	{% endfor %}

    <!-- The following code doesn't work properly... The "limit" is 1, so only the first "page" (which is currently the
         Alumni page) is inspected. Since that page does not the "feature: true" indication, it is not tiled. Essentially,
         all pages should be inspected, but only "limit" would get tiled. 
    
	{% for page in site.pages limit:site.tiles-count %}
		{% if site.tiles-source == 'pages'%}
            {% if page.feature %}
		        <article>
                    <span class="image">
                        <img src="{{ page.image }}" alt="" />
                    </span>
                    <header class="major">
                        <h3><a href="{{ page.url  | relative_url }}" class="link">{{ page.title }}</a></h3>
                        <p>{{ page.description }}</p>
                    </header>
		        </article>		
            {% endif %}
		{% endif %}
	{% endfor %}
    -->
    
    <!-- Corrected code manually counts tiles as we generate them and breaks out of the loop when we're done -->
    
	{% if site.tiles-source == 'pages'%}
        {% assign page_tiles = 0 %}
        {% for page in site.pages %}
            {% if page.feature %}
                {% assign page_tiles = page_tiles | plus: 1 %}
		        <article>
                    <span class="image">
                        <img src="{{ page.image }}" alt="" />
                    </span>
                    <header class="major">
                        <h3><a href="{{ page.url  | relative_url }}" class="link">{{ page.title }}</a></h3>
                        <p>{{ page.description }}</p>
                    </header>
		        </article>		
            {% endif %}
            {% if page_tiles >= site.tiles-count %}
                {% break %}
            {% endif %}
        {% endfor %}
    {% endif %}
	
</section>
